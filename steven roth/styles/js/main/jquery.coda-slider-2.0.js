$(function(){$("body").removeClass("coda-slider-no-js");$(".coda-slider").children(".panel").hide().end().prepend('<p class="loading">Loading...<br /><img src="images/ajax-loader.gif" alt="loading..." /></p>')});var sliderCount=1;$.fn.codaSlider=function(e){e=$.extend({autoHeight:true,autoHeightEaseDuration:1e3,autoHeightEaseFunction:"easeInOutExpo",autoSlide:false,autoSlideInterval:7e3,autoSlideStopWhenClicked:true,crossLinking:true,dynamicArrows:true,dynamicArrowLeftText:"&#171; left",dynamicArrowRightText:"right &#187;",dynamicTabs:true,dynamicTabsAlign:"center",dynamicTabsPosition:"top",externalTriggerSelector:"a.xtrig",firstPanelToLoad:1,panelTitleSelector:"h2.title",slideEaseDuration:1e3,slideEaseFunction:"easeInOutExpo"},e);return this.each(function(){function f(n){if(e.autoHeight){panelHeight=$(".panel:eq("+n+")",t).height();t.animate({height:panelHeight},e.autoHeightEaseDuration,e.autoHeightEaseFunction)}}function l(){if(s==0||!e.autoSlideStopWhenClicked){if(o==r){var i=0;o=1}else{var i=-(n*o);o+=1}f(o-1);t.siblings(".coda-nav").find("a").removeClass("current").parents("ul").find("li:eq("+(o-1)+") a").addClass("current");$(".panel-container",t).animate({marginLeft:i},e.slideEaseDuration,e.slideEaseFunction);setTimeout(l,e.autoSlideInterval)}}var t=$(this);if(e.dynamicArrows){t.parent().addClass("arrows");t.before('<div class="coda-nav-left" id="coda-nav-left-'+sliderCount+'"><a href="#">'+e.dynamicArrowLeftText+"</a></div>");t.after('<div class="coda-nav-right" id="coda-nav-right-'+sliderCount+'"><a href="#">'+e.dynamicArrowRightText+"</a></div>")}var n=t.find(".panel").width();var r=t.find(".panel").size();var i=n*r;var s=0;$(".panel",t).wrapAll('<div class="panel-container"></div>');$(".panel-container",t).css({width:i});if(e.crossLinking&&location.hash&&parseInt(location.hash.slice(1))<=r){var o=parseInt(location.hash.slice(1));var u=-(n*(o-1));$(".panel-container",t).css({marginLeft:u})}else if(e.firstPanelToLoad!=1&&e.firstPanelToLoad<=r){var o=e.firstPanelToLoad;var u=-(n*(o-1));$(".panel-container",t).css({marginLeft:u})}else{var o=1}$("#coda-nav-left-"+sliderCount+" a").click(function(){s++;if(o==1){u=-(n*(r-1));f(r-1);o=r;t.siblings(".coda-nav").find("a.current").removeClass("current").parents("ul").find("li:last a").addClass("current")}else{o-=1;f(o-1);u=-(n*(o-1));t.siblings(".coda-nav").find("a.current").removeClass("current").parent().prev().find("a").addClass("current")}$(".panel-container",t).animate({marginLeft:u},e.slideEaseDuration,e.slideEaseFunction);if(e.crossLinking){location.hash=o}return false});$("#coda-nav-right-"+sliderCount+" a").click(function(){s++;if(o==r){u=0;o=1;f(0);t.siblings(".coda-nav").find("a.current").removeClass("current").parents("ul").find("a:eq(0)").addClass("current")}else{u=-(n*o);f(o);o+=1;t.siblings(".coda-nav").find("a.current").removeClass("current").parent().next().find("a").addClass("current")}$(".panel-container",t).animate({marginLeft:u},e.slideEaseDuration,e.slideEaseFunction);if(e.crossLinking){location.hash=o}return false});if(e.dynamicTabs){var a='<div class="coda-nav" id="coda-nav-'+sliderCount+'"><ul></ul></div>';switch(e.dynamicTabsPosition){case"bottom":t.parent().append(a);break;default:t.parent().prepend(a);break}ul=$("#coda-nav-"+sliderCount+" ul");$(".panel",t).each(function(t){ul.append('<li class="tab'+(t+1)+'"><a href="#'+(t+1)+'">'+$(this).find(e.panelTitleSelector).text()+"</a></li>")});navContainerWidth=t.width()+t.siblings(".coda-nav-left").width()+t.siblings(".coda-nav-right").width();ul.parent().css({width:navContainerWidth});switch(e.dynamicTabsAlign){case"center":ul.css({width:($("li",ul).width()+2)*r});break;case"right":ul.css({"float":"right"});break}}$("#coda-nav-"+sliderCount+" a").each(function(r){$(this).bind("click",function(){s++;$(this).addClass("current").parents("ul").find("a").not($(this)).removeClass("current");u=-(n*r);f(r);o=r+1;$(".panel-container",t).animate({marginLeft:u},e.slideEaseDuration,e.slideEaseFunction);if(!e.crossLinking){return false}})});$(e.externalTriggerSelector).each(function(){if(sliderCount==parseInt($(this).attr("rel").slice(12))){$(this).bind("click",function(){s++;targetPanel=parseInt($(this).attr("href").slice(1));u=-(n*(targetPanel-1));f(targetPanel-1);o=targetPanel;t.siblings(".coda-nav").find("a").removeClass("current").parents("ul").find("li:eq("+(targetPanel-1)+") a").addClass("current");$(".panel-container",t).animate({marginLeft:u},e.slideEaseDuration,e.slideEaseFunction);if(!e.crossLinking){return false}})}});if(e.crossLinking&&location.hash&&parseInt(location.hash.slice(1))<=r){$("#coda-nav-"+sliderCount+" a:eq("+(location.hash.slice(1)-1)+")").addClass("current")}else if(e.firstPanelToLoad!=1&&e.firstPanelToLoad<=r){$("#coda-nav-"+sliderCount+" a:eq("+(e.firstPanelToLoad-1)+")").addClass("current")}else{$("#coda-nav-"+sliderCount+" a:eq(0)").addClass("current")}if(e.autoHeight){panelHeight=$(".panel:eq("+(o-1)+")",t).height();t.css({height:panelHeight})}if(e.autoSlide){t.ready(function(){setTimeout(l,e.autoSlideInterval)})}$(".panel",t).show().end().find("p.loading").remove();t.removeClass("preload");sliderCount++})}